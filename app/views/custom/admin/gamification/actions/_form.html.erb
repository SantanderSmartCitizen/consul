<%= render "shared/globalize_locales", resource: @action %>

<%= translatable_form_for(@action, url: form_url) do |f| %>

  <%= render "shared/errors", resource: @action %>

  <% if params['return_to'] %>
    <%= f.hidden_field :return_to, value: params['return_to'] %>
  <% end %>

  <div class="row">
    <div class="small-12">
      <% if @gamification.present? %>
        <%= f.hidden_field :gamification_id, value: @gamification.id %>
      <% elsif @action.gamification.present? %>
        <%= f.hidden_field :gamification_id, value: @action.gamification.id %>
      <% else %>
        <div class="small-12 medium-6 large-4 column">
          <% select_options = Gamification.all.map { |p| [p.key, p.id] } %>
          <%= f.select :gamification_id,
                        options_for_select(select_options),
                        prompt: t("admin.gamification.actions.form.select_gamification"),
                        label: t("admin.gamification.actions.form.gamification") %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="row">
    <div class="clear">
      <div class="small-12 medium-6 column">
        <%= f.text_field :key,
                          label: t("admin.gamification.actions.form.key") %>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="small-12 medium-6 column">
      <%= f.select :process_type,
                    gamification_action_process_types,
                    label: t("admin.gamification.actions.form.process_type"),
                    include_blank: t("admin.gamification.actions.form.select_process_type") %>
    </div>
    <div class="small-12 medium-6 column">
        <%= f.text_field :operation,
                          label: t("admin.gamification.actions.form.operation") %>
    </div>
  </div>

  <div class="row">
    <%= f.translatable_fields do |translations_form| %>
      <div class="small-12 medium-6 column">
        <%= translations_form.text_field :title %>
      </div>

      <div class="small-12 column">
        <%= translations_form.text_area :description, rows: 8 %>
      </div>
    <% end %>
  </div>

  <div class="row">
    <div class="small-12 medium-6 column">

      <%= f.number_field :score, step: 1, min: 1,
                        label: t("admin.gamification.actions.form.score") %>
    </div>
  </div>

  <div class="row">
    <div class="small-12 medium-3 column clear end">
      <%= f.submit t("admin.gamification.actions.#{admin_submit_action(@action)}.submit_button"), class: "button success expanded margin-top" %>
    </div>
  </div>

<% end %>
